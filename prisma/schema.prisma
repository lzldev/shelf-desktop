generator client {
  provider     = "prisma-kysely"
  output       = "../src/main/src/db/"
  fileName     = "kysely-types.ts"
  enumFileName = "kysely-enums.ts"
}

datasource db {
  provider = "sqlite"
  url      = ":memory:"
}

model Contents {
  id          Int           @id @default(autoincrement())
  hash        String?
  extension   String?
  createdAt   DateTime  @default(now())
  updatedAt   DateTime  @default(now())
  deletedAt   DateTime?
  ContentTags ContentTags[]
  Paths       Paths[]

  @@index([hash], map: "contents_hash")
}

model Paths {
  id        Int       @id @default(autoincrement())
  path      String?
  mTimeMs   Float?
  contentId Int?
  createdAt DateTime  @default(now())
  updatedAt DateTime  @default(now())
  Contents  Contents? @relation(fields: [contentId], references: [id], onDelete: Cascade)

  @@index([contentId], map: "paths_content_id")
  @@index([path], map: "paths_path")
}


model Tags {
  id          Int           @id @default(autoincrement())
  name        String?
  colorId     Int?
  createdAt   DateTime @default(now())
  updatedAt   DateTime @default(now())
  ContentTags ContentTags[]
  TagColors   TagColors?    @relation(fields: [colorId], references: [id])
}

model ContentTags {
  contentId Int
  tagId     Int
  createdAt DateTime @default(now())
  updatedAt DateTime @default(now())
  Tags      Tags     @relation(fields: [tagId], references: [id], onDelete: Cascade)
  Contents  Contents @relation(fields: [contentId], references: [id], onDelete: Cascade)

  @@id([contentId, tagId])
  @@index([tagId], map: "content_tags_tag_id")
  @@index([contentId], map: "content_tags_content_id")
}

model TagColors {
  id        Int      @id @default(autoincrement())
  name      String?
  color     String?
  createdAt DateTime @default(now())
  updatedAt DateTime @default(now())
  Tags      Tags[]
}
